source "gpg -dq $HOME/.mutt/mutt-pass.gpg |"

# Mailboxes
set mbox_type=Maildir
set folder=~/Mail
set spoolfile=+/
set header_cache=~/.cache/mutt

set from = darius.lee@ericsson.com
set use_from = yes
set smtp_pass = `pass Mail/darius.lee@ericsson.com`
set smtp_url = "smtp://darius.lee@ericsson.com@smtp.office365.com"
set ssl_starttls = yes
fcc-hook ericsson\\.com$ "$folder/Sent Items"
set postponed = +/Drafts

# Aesthetic
set help=no

set sidebar_visible
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set mail_check_stats

# Threads?
set sort=threads

# Mailbox Config
mailboxes "=/mail-work/INBOX"
mailboxes "=/mail-work/Drafts"
mailboxes "=/mail-work/Sent Items"
mailboxes "=/mail-work/Conversation History"
mailboxes "=/mail-work/Outbox"

mailboxes "=/mail-home/Inbox"
mailboxes "=/mail-home/Drafts"
mailboxes "=/mail-home/Sent"

bind index,pager \CN sidebar-next
bind index,pager \CP sidebar-prev
bind index,pager \CO sidebar-open

# set realname = 'Darius Lee'
# set imap_user = 'dariuszlee93@gmail.com'

# set folder = "imaps://imap.gmail.com" 
# set spoolfile = "imaps://imap.gmail.com/INBOX"
# set record="imaps://imap.gmail.com/[Gmail]/Sent Mail" 
# set postponed="imaps://imap.gmail.com/[Gmail]/Drafts" 

# set header_cache = "~/.mutt/cache/headers" 
# set message_cachedir = "~/.mutt/cache/bodies" 
# set certificate_file = "~/.mutt/certificates"

# set move = no
# set imap_keepalive = 900

# HTML VIEWER
auto_view text/html
alternative_order text/plain text/enriched text/html

macro index <F8> \
"<enter-command>set my_old_pipe_decode=\$pipe_decode my_old_wait_key=\$wait_key nopipe_decode nowait_key<enter>\
<shell-escape>notmuch-mutt -r --prompt search<enter>\
<change-folder-readonly>`echo ${XDG_CACHE_HOME:-$HOME/.cache}/notmuch/mutt/results`<enter>\
<enter-command>set pipe_decode=\$my_old_pipe_decode wait_key=\$my_old_wait_key<enter>" \
"notmuch: search mail"

macro index <F9> \
"<enter-command>set my_old_pipe_decode=\$pipe_decode my_old_wait_key=\$wait_key nopipe_decode nowait_key<enter>\
<pipe-message>notmuch-mutt -r thread<enter>\
<change-folder-readonly>`echo ${XDG_CACHE_HOME:-$HOME/.cache}/notmuch/mutt/results`<enter>\
<enter-command>set pipe_decode=\$my_old_pipe_decode wait_key=\$my_old_wait_key<enter>" \
"notmuch: reconstruct thread"

macro index <F6> \
"<enter-command>set my_old_pipe_decode=\$pipe_decode my_old_wait_key=\$wait_key nopipe_decode nowait_key<enter>\
<pipe-message>notmuch-mutt tag -- -inbox<enter>\
<enter-command>set pipe_decode=\$my_old_pipe_decode wait_key=\$my_old_wait_key<enter>" \
"notmuch: remove message from inbox"

# Color scheme
source ~/.mutt/mutt-colors-neonwolf-256.muttrc
# source ~/.mutt/mutt-colors-solarized/mutt-colors-solarized-dark-16.muttrc 
# source ~/.mutt/mutt-colors-solarized/mutt-colors-solarized-light-16.muttrc 
# source ~/.mutt/mutt-colors-solarized/mutt-colors-solarized-dark-256.muttrc 
# source ~/.mutt/mutt-colors-solarized/mutt-colors-solarized-light-256.muttrc
#

set crypt_use_gpgme = yes
# Automatically sign all out-going email
set crypt_autosign = yes
# # Sign replies to signed emails
# set crypt_replysign = yes
# # Encrypt replies to encrypted emails
# set crypt_replyencrypt = yes
# # Encrypt and sign replies to encrypted and signed email
# set crypt_replysignencrypted = yes
# # Attempt to verify signatures automatically
# set crypt_verify_sig = yes
# # Use my key for signing and encrypting
# set pgp_sign_as = 0xEAA4C008
